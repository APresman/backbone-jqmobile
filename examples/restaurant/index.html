<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="user-scalable=no" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Restaurant App</title>
	<link rel="stylesheet" href="../lib/jquery.mobile-1.1.0/jquery.mobile-1.1.0.css" />
	<style>
		
	</style>
	
	<!-- deps -->
	<script src="../lib/jquery-1.7.1.js"></script>
	<script src="../lib/backbone/underscore-1.3.3.js"></script>
	<script src="../lib/backbone/backbone-0.9.2.js"></script>
	<script src="../lib/backbone-localstorage.js"></script>
		
	<script src="../lib/handlebars-1.0.0.beta.6.js"></script>
	<!-- backbone-jqmobile code -->
	<script src="../backbone-jqmobile.js"></script>
		
	<!-- App code -->
	<script src="../lib/jquery.mobile-1.1.0/jquery.mobile-1.1.0.js"></script>
	
	<script src="template.js"></script>
	<script src="util.js"></script>
	<script src="app.js"></script>
	
	<script type="text/javascript" charset="utf-8">
		$.mobile.ajaxEnabled = false;
		$.mobile.linkBindingEnabled = false;
		$.mobile.hashListeningEnabled = false;
		$.mobile.pushStateEnabled = false;
		
		function loadScript(src, id, callback) {
			var ga = document.createElement('script');
			ga.type = 'text/javascript';
			ga.async = false;
			ga.src = src + "?" + (new Date()).getTime();
			
			if(callback){
				ga.onload = callback;
			}
			
			if (id) {
				ga.id = id
			}
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(ga, s);
		}
		
		function loadTemplate(src, callback){
			var data = $.ajax({type: 'GET', url: src + '.html', async: false}).responseText;
            $("head").append(data);
			if(callback) callback();
		}
	</script>
  
	<script id="index-page" type="text/x-handlebars-template">
		<div id="header">
			Please wait...
		</div>
		
		<div id="gotoLogin" style="display: none;">
			<a href="#login" data-role="button">Login</a>
		</div>
		
		<div id="gotoHome" style="display: none;">
			<a href="#home" data-role="button">Home</a>
		</div>
	</script>
	
	<script id="login-page" type="text/x-handlebars-template">
		<form action="#" method="post">
		<fieldset>
			<div data-role="fieldcontain">
				<label for="username">Username:</label>
				<input name="username" id="username" type="email">
			</div>
			<div data-role="fieldcontain">
				<label for="username">Password:</label>
				<input name="password" id="password" type="password">
			</div>
			<div data-role="fieldcontain">
				<input type="submit" value="Login">
			</div>
		</fieldset>
		</form>
	</script>
	
	<script id="home-page" type="text/x-handlebars-template">
		<ul data-role="listview">
			<li><a href="#payslips">Payslips</a></li>
			<li><a href="#leaves">Leave Request</a></li>
			<li><a href="#apps">Apps</a></li>
		</ul>
	</script>
	
	<script id="payslips-page" type="text/x-handlebars-template">
		<a id="addLocal" data-role="button">Add Local</a>
		<div data-fragment='remoteData'></div>
		<div data-fragment='localData'></div>
	</script>
	
	<script id="payslips-list" type="text/x-handlebars-template">
		<ul data-role='listview' data-inset="true">
		{{#if source}}
			{{#each source}}
				<li><a href="#payslipDetail/{{this.type}}/{{this.id}}">{{this.data}}</a></li>
			{{/each}}
		{{else}}
			<li>No data found</li>
		{{/if}}
		</ul>
	</script>
	
	<script id="payslip-detail" type="text/x-handlebars-template">
		Payslip detail here
	</script>
	
	<script id="leaves-page" type="text/x-handlebars-template">
		This is Leaves page<br>
		{{source}}
	</script>
	
	<script id="apps-page" type="text/x-handlebars-template">
		Enter App Name
		<input type="text" id="appName">
		<a data-role="button" id="addApp">Add Test App</a>
		<div data-fragment='appList'></div>
	</script>
	
	<script id="apps-list" type="text/x-handlebars-template">
		<ul data-role='listview' data-inset="true">
		{{#if source}}
			{{#each source}}
				<li><a href="#openApp/{{this.name}}">{{this.name}}</a></li>
			{{/each}}
		{{else}}
			<li>No data found</li>
		{{/if}}
		</ul>
	</script>
</head>
<body id="appContainer">
	
</body>